<!DOCTYPE html>
<html>
  <head>
    <link href="css/site.css" media="screen" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <h1>No-Nifty</h1>

    <div id="content">
    	<table>
    		<thead><th>Name</th><th>Preferred Dates</th></thead>
    		<tbody id="peeps"></tbody>
    	</table>
    </div>

    <script id="niftyers-template" type="text/x-handlebars-template">
      <tr class="entry">
        <td><span>{{first}} {{last}}</span></td>
        <td>{{preferred1}} Or {{preferred2}} Or {{preferred3}}</td>
      </tr>
    </script>

    <!-- Don't need jQuery for Tabletop, but using it for this example -->
    <script type="text/javascript" src="js/handlebars.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/tabletop.js"></script>
    <script type="text/javascript">
      var public_spreadsheet_url = 'https://docs.google.com/spreadsheet/ccc?key=0Ap4bJiYhk0XrdFg1NThXMGdEOFRHamNVMk5fZkw3aXc#gid=0';

      $(document).ready( function() {
        Tabletop.init( { key: public_spreadsheet_url,
                         callback: showInfo,
                         parseNumbers: true } );
      });

      function showInfo(data, tabletop) {
        var source   = $("#niftyers-template").html();
        var template = Handlebars.compile(source);

        $.each( tabletop.sheets("Peeps").all(), function(i, peep) {
          var html = template(peep);
          $("#peeps").append(html);
        });
      }
    </script>
  </body>
</html>
